<!DOCTYPE html>
<html lang="{{ session.get('language', 'uk') }}">
<head>
    <meta charset="UTF-8">
    <title>{{ get_text('bunker_survival') }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='assets/icons/game_icon.png') }}">
</head>
<body>

    {% if gs.current_screen == 'main_menu' %}
    <div class="screen-container main-menu-bg">
        <h1>{{ get_text('bunker_survival') }}</h1>
        <form method="POST" class="button-container">
            <button type="submit" name="action" value="start_new_game" class="btn">{{ get_text('play') }}</button>
            <button type="submit" name="action" value="open_settings" class="btn">{{ get_text('settings') }}</button>
        </form>
    </div>

    {% elif gs.current_screen == 'settings' %}
    <div class="screen-container settings-bg">
        <h1>{{ get_text('settings') }}</h1>
        <form method="POST" class="button-container">
            <p>{{ get_text('language') }}:</p>
            <button type="submit" name="action" value="set_lang_uk" class="btn">{{ get_text('ukrainian') }}</button>
            <button type="submit" name="action" value="set_lang_en" class="btn">{{ get_text('english') }}</button>
            <button type="submit" name="action" value="close_settings" class="btn">{{ get_text('back') }}</button>
        </form>
    </div>

    {% elif gs.current_screen == 'game' %}
    <div class="screen-container bunker-bg">
        <div class="game-layout">
            <header class="game-header">
                {{ get_text('day') }}: {{ gs.day }}
            </header>

            <aside class="left-panel">
                <div class="character-display"></div>
                <div class="stats-panel">
                    <div class="stat-item">
                        <span>❤️ {{ get_text('health') }}: {{ gs.health }}%</span>
                    </div>
                    <div class="stat-item">
                        <img src="{{ url_for('static', filename='assets/icons/suit_icon.png') }}" alt="" class="stat-icon">
                        <span>{{ get_text('suit_charge') }}: {{ gs.suit_charge }}%</span>
                    </div>
                     <div class="stat-item">
                        <img src="{{ url_for('static', filename='assets/icons/food_icon.png') }}" alt="" class="stat-icon">
                        <span>{{ get_text('food') }}: {{ gs.food }}</span>
                    </div>
                    <div class="stat-item">
                        <img src="{{ url_for('static', filename='assets/icons/water_icon.png') }}" alt="" class="stat-icon">
                        <span>{{ get_text('water') }}: {{ gs.water }}</span>
                    </div>
                </div>
            </aside>

            <main class="center-panel">
                <!-- This area can be used for character portraits or main events later -->
                <div></div>
                <div class="messages-log">
                    <h3>{{ get_text('last_action_result') }}</h3>
                    {% if gs.messages %}
                        {% for message in gs.messages|reverse %}
                        <p>{{ message }}</p>
                        {% endfor %}
                    {% endif %}
                </div>
            </main>

            <aside class="right-panel">
                <form method="POST" class="button-container">
                    <button type="submit" name="action" value="go_outing" class="btn">{{ get_text('go_on_outing') }}</button>
                    <button type="submit" name="action" value="charge_suit" class="btn">{{ get_text('charge_suit') }}</button>
                    <button type="submit" name="action" value="skip_day" class="btn">{{ get_text('skip_day') }}</button>
                    <button type="submit" name="action" value="open_settings" class="btn">{{ get_text('settings') }}</button>
                    <button type="submit" name="action" value="exit_to_menu" class="btn">{{ get_text('exit_to_menu') }}</button>
                </form>
            </aside>
        </div>
    </div>

    {% elif gs.current_screen == 'game_over' %}
    <div class="screen-container game-over-bg">
        <div class="game-over-screen">
            <h1>{{ get_text('game_over') }}</h1>
            <p>{{ get_text(gs.ending or 'ending_generic_death') }}</p>
            <form method="POST">
                <button type="submit" name="action" value="exit_to_menu" class="btn">{{ get_text('exit_to_menu') }}</button>
            </form>
        </div>
    </div>

    {% endif %}

</body>
</html>
